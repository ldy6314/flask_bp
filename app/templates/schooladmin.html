{% extends "base.html"%}
{% from 'bootstrap/form.html' import render_form%}
{% from 'bootstrap/form.html' import render_form_row%}
{% block content%}

<ul class="nav nav-tabs">
  <li class="nav-item">
    <a class="nav-link active" data-toggle="tab" href="#home">课程上传</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" data-toggle="tab" href="#menu1">课程管理</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" data-toggle="tab" href="#menu2">班级汇总</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" data-toggle="tab" href="#menu3">俱乐部汇总</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" data-toggle="tab" href="#menu4">课程添加</a>
  </li>

</ul>
<!-- Tab panes -->
<div class="tab-content">

  <div class="tab-pane active container" id="home">
    {{render_form(form)}}
  </div>

  <div class="tab-pane container" id="menu1">
    课程管理
  </div>
  <div class="tab-pane container" id="menu2">
    班级汇总
  </div>
  <div class="tab-pane container" id="menu3">
    俱乐部汇总
  </div>
  <div class="tab-pane container" id="menu4">
    <div class="row">
      <div class="col-md-6 offset-3">
        {{render_form(form1, id="add_subject_form")}}
      </div>
    </div>
  </div>
  <br>
   <div class="row">
      <div class="col-md-6 offset-3" >
       <div id="result">

       </div>
      </div>
    </div>
</div>
{%endblock%}

{%block script%}
{{super()}}
<script>
  $(function () {
    $("#add_subject_form").submit(function (e) {
      e.preventDefault()
      $.ajax({
        url: '/admin/add_subject',
        type: 'post',
        dataType: 'json',
        data: $(this).serialize(),
        success: function (res) {
           res_str = res['result']
           res_type = res['type']
           $("#result").text(res_str).removeClass(res_type).addClass(res_type).fadeIn().fadeOut(3000)
        },
        error:function(xhr, e, obj)
        {
             alert(e);
        }
      })
    })
  })
</script>
{% endblock%}